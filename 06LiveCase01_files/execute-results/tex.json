{
  "hash": "fd3c570deb76480c6c73deb30e42cd42",
  "result": {
    "markdown": "# Case Analysis of SP500 \n\nWe will investigate data related to the S&P500 stocks.\n\nThis is the URL of the data we will use:\nhttps://docs.google.com/spreadsheets/d/11ahk9uWxBkDqrhNm7qYmiTwrlSC53N1zvXYfv7ttOCM/edit#gid=0 \n\n\n### 1) Reading S&P500 data from a Google Sheet into a tibble\n\nThe Google Sheet ID is: `11ahk9uWxBkDqrhNm7qYmiTwrlSC53N1zvXYfv7ttOCM`. \nWe can use the function `gsheet2tbl` in package `gsheet` to read the Google Sheet into a dataframe, as demonstrated in the following code.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read S&P500 stock data present in a Google Sheet.\nlibrary(gsheet)\n\nprefix <- \"https://docs.google.com/spreadsheets/d/\"\nsheetID <- \"11ahk9uWxBkDqrhNm7qYmiTwrlSC53N1zvXYfv7ttOCM\"\n# Form the URL to connect to\nurl500 <- paste(prefix, sheetID) \n# Read the Google Sheet located at the URL into a tibble called sp500\nsp500 <- gsheet2tbl(url500)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNo encoding supplied: defaulting to UTF-8.\n```\n:::\n:::\n\n\n\n\n### 1) Reviewing the data\nWe run the str() function to better understand the data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(sp500)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'tbl_df', 'tbl' and 'data.frame':\t503 obs. of  36 variables:\n $ Date                                   : chr  \"7/13/2023\" \"7/13/2023\" \"7/13/2023\" \"7/13/2023\" ...\n $ Stock                                  : chr  \"A\" \"AAL\" \"AAP\" \"AAPL\" ...\n $ Description                            : chr  \"Agilent Technologies, Inc.\" \"American Airlines Group, Inc.\" \"Advance Auto Parts Inc.\" \"Apple Inc.\" ...\n $ Sector                                 : chr  \"Health Technology\" \"Transportation\" \"Retail Trade\" \"Electronic Technology\" ...\n $ Industry                               : chr  \"Medical Specialties\" \"Airlines\" \"Specialty Stores\" \"Telecommunications Equipment\" ...\n $ Market.Capitalization                  : num  3.54e+10 1.20e+10 4.19e+09 2.99e+12 2.36e+11 ...\n $ Price                                  : num  120 18.4 70.5 190.2 133.6 ...\n $ X52.Week.Low                           : num  113.3 11.7 63.6 124.2 131 ...\n $ X52.Week.High                          : num  160 19.1 212 194 168 194 116 78.3 328 519 ...\n $ Return.on.Equity..TTM.                 : num  24.8 NA 14.6 146 51.1 389 16 14.8 30.7 33.7 ...\n $ Return.on.Assets..TTM.                 : num  12.7 2.64 3.35 27.6 5.43 2.79 7.82 4.98 14.9 17.9 ...\n $ Return.on.Invested.Capital..TTM.       : num  16.51 5.44 6.17 57.18 9.9 ...\n $ Gross.Margin..TTM.                     : num  54.1 21.7 43.8 43.2 72.2 ...\n $ Operating.Margin..TTM.                 : num  23.78 7.3 5.63 29.16 41.07 ...\n $ Net.Margin..TTM.                       : num  19.19 3.39 3.61 24.49 13.3 ...\n $ Price.to.Earnings.Ratio..TTM.          : num  26.45 7.23 10.48 32.32 31.46 ...\n $ Price.to.Book..FY.                     : num  6.68 NA 1.56 59.85 13.7 ...\n $ Enterprise.Value.EBITDA..TTM.          : num  18.8 7.08 8.85 24.5 9.24 12.8 19.1 NA 17.4 32.7 ...\n $ EBITDA..TTM.                           : num  1.97e+09 6.02e+09 9.21e+08 1.24e+11 3.18e+10 ...\n $ EPS.Diluted..TTM.                      : num  4.54 2.54 6.72 5.89 4.25 ...\n $ EBITDA..TTM.YoY.Growth.                : num  10.52 NA -16 -5.36 10.6 ...\n $ EBITDA..Quarterly.YoY.Growth.          : num  8.2 NA -39.01 -4.58 11.68 ...\n $ EPS.Diluted..TTM.YoY.Growth.           : num  9.17 NA -25.21 -4.33 -39.11 ...\n $ EPS.Diluted..Quarterly.YoY.Growth.     : num  11.69944 NA -68.3683 -0.00656 -94.8904 ...\n $ Price.to.Free.Cash.Flow..TTM.          : num  30.13 7.03 NA 30.92 10.09 ...\n $ Free.Cash.Flow..TTM.YoY.Growth.        : num  11.81 NA -100.23 -7.85 6.68 ...\n $ Free.Cash.Flow..Quarterly.YoY.Growth.  : num  55.7078 648.1481 -176.135 -0.0312 -15.3392 ...\n $ Debt.to.Equity.Ratio..MRQ.             : num  0.473 NA 1.582 1.763 4.678 ...\n $ Current.Ratio..MRQ.                    : num  2.37 0.718 1.244 0.94 0.96 ...\n $ Quick.Ratio..MRQ.                      : num  1.708 0.624 0.238 0.878 0.821 ...\n $ Dividend.Yield.Forward                 : num  0.75 NA 1.413 0.506 4.386 ...\n $ Dividends.per.share..Annual.YoY.Growth.: num  8.25 NA 84.62 5.88 7.53 ...\n $ Price.to.Sales..FY.                    : num  5.257 0.246 0.383 7.875 4.091 ...\n $ Revenue..TTM.YoY.Growth.               : num  7.8597 50.2948 1.4153 -0.2544 0.0282 ...\n $ Revenue..Quarterly.YoY.Growth.         : num  6.85 36.97 1.29 -2.51 -9.7 ...\n $ Technical.Rating                       : chr  \"Neutral\" \"Sell\" \"Buy\" \"Sell\" ...\n```\n:::\n:::\n\n\n\nThe `str(sp500)` output provides valuable insights into the structure and data types of the columns in the `sp500` tibble. Let's delve into the details:\n\nThe output reveals that `sp500` is a tibble with dimensions [503 Ã— 36]. This means it consists of 503 rows, each representing a specific S&P500 stock, and 36 columns containing information about each stock.\n\nHere's a breakdown of the information associated with each column:\n\n- The columns labeled `Date`, `Stock`, `Description`, `Sector`, and `Industry` are character columns. They respectively represent the date, stock ticker symbol, description, sector, and industry of each S&P500 stock.\n\n- Columns such as `Market.Capitalization`, `Price`, `X52.Week.Low`, `X52.Week.High`, and other numeric columns contain diverse financial metrics and stock prices related to the S&P500 stocks.\n\n- The column labeled `Technical.Rating` is a character column that assigns a technical rating to each stock.\n\nBy examining the `str(sp500)` output, you gain a comprehensive understanding of the data types and column names present in the `sp500` tibble, enabling you to grasp the structure of the dataset effectively.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\n# Define a mapping of new column names\nnew_names <- c(\n  \"Date\", \"Stock\", \"Desc\", \"Sector\", \"Industry\", \n  \"MarketCap\", \"Price\", \"Low52Wk\", \"High52Wk\", \n  \"ROE\", \"ROA\", \"ROIC\", \"GrossMargin\", \n  \"OperatingMargin\", \"NetMargin\", \"PE\", \n  \"PB\", \"EVEBITDA\", \"EBITDA\", \"EPS\", \n  \"EBITDA_YOY\", \"EBITDA_QYOY\", \"EPS_YOY\", \n  \"EPS_QYOY\", \"PFCF\", \"FCF\", \n  \"FCF_QYOY\", \"DebtToEquity\", \"CurrentRatio\", \n  \"QuickRatio\", \"DividendYield\", \n  \"DividendsPerShare_YOY\", \"PS\", \n  \"Revenue_YOY\", \"Revenue_QYOY\", \"TechRating\"\n)\n# Rename the columns using the new_names vector\nsp500_renamed <- sp500 %>% \n  rename_with(~ new_names, everything())\n\n# Print the updated column names\nnames(sp500_renamed)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Date\"                  \"Stock\"                 \"Desc\"                 \n [4] \"Sector\"                \"Industry\"              \"MarketCap\"            \n [7] \"Price\"                 \"Low52Wk\"               \"High52Wk\"             \n[10] \"ROE\"                   \"ROA\"                   \"ROIC\"                 \n[13] \"GrossMargin\"           \"OperatingMargin\"       \"NetMargin\"            \n[16] \"PE\"                    \"PB\"                    \"EVEBITDA\"             \n[19] \"EBITDA\"                \"EPS\"                   \"EBITDA_YOY\"           \n[22] \"EBITDA_QYOY\"           \"EPS_YOY\"               \"EPS_QYOY\"             \n[25] \"PFCF\"                  \"FCF\"                   \"FCF_QYOY\"             \n[28] \"DebtToEquity\"          \"CurrentRatio\"          \"QuickRatio\"           \n[31] \"DividendYield\"         \"DividendsPerShare_YOY\" \"PS\"                   \n[34] \"Revenue_YOY\"           \"Revenue_QYOY\"          \"TechRating\"           \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tibble)\n\nnew_names <- c(\n  \"Date\", \"Stock\", \"Desc\", \"Sector\", \"Industry\", \n  \"MarketCap\", \"Price\", \"Low52Wk\", \"High52Wk\", \n  \"ROE\", \"ROA\", \"ROIC\", \"GrossMargin\", \n  \"OperatingMargin\", \"NetMargin\", \"PE\", \n  \"PB\", \"EVEBITDA\", \"EBITDA\", \"EPS\", \n  \"EBITDA_YOY\", \"EBITDA_QYOY\", \"EPS_YOY\", \n  \"EPS_QYOY\", \"PFCF\", \"FCF\", \n  \"FCF_QYOY\", \"DebtToEquity\", \"CurrentRatio\", \n  \"QuickRatio\", \"DividendYield\", \n  \"DividendsPerShare_YOY\", \"PS\", \n  \"Revenue_YOY\", \"Revenue_QYOY\", \"TechRating\"\n)\n\ndescriptions <- c(\n  \"Date of the observation\",\n  \"Stock ticker symbol\",\n  \"Description of the stock\",\n  \"Sector the stock belongs to\",\n  \"Industry the stock belongs to\",\n  \"Market capitalization of the company\",\n  \"Stock price\",\n  \"52-week low price\",\n  \"52-week high price\",\n  \"Return on Equity\",\n  \"Return on Assets\",\n  \"Return on Invested Capital\",\n  \"Gross Margin\",\n  \"Operating Margin\",\n  \"Net Margin\",\n  \"Price-to-Earnings Ratio\",\n  \"Price-to-Book Ratio\",\n  \"Enterprise Value to EBITDA\",\n  \"EBITDA\",\n  \"Earnings per Share\",\n  \"EBITDA Year-over-Year Growth\",\n  \"EBITDA Quarterly Year-over-Year Growth\",\n  \"EPS Year-over-Year Growth\",\n  \"EPS Quarterly Year-over-Year Growth\",\n  \"Price-to-Free Cash Flow\",\n  \"Free Cash Flow\",\n  \"Free Cash Flow Quarterly Year-over-Year Growth\",\n  \"Debt-to-Equity Ratio\",\n  \"Current Ratio\",\n  \"Quick Ratio\",\n  \"Dividend Yield\",\n  \"Annual Dividends per Share Year-over-Year Growth\",\n  \"Price-to-Sales Ratio\",\n  \"Revenue Year-over-Year Growth\",\n  \"Revenue Quarterly Year-over-Year Growth\",\n  \"Technical Rating\"\n)\n\ncolumn_info <- tibble(NewName = new_names, Description = descriptions)\n\nprint(column_info)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 36 x 2\n   NewName   Description                         \n   <chr>     <chr>                               \n 1 Date      Date of the observation             \n 2 Stock     Stock ticker symbol                 \n 3 Desc      Description of the stock            \n 4 Sector    Sector the stock belongs to         \n 5 Industry  Industry the stock belongs to       \n 6 MarketCap Market capitalization of the company\n 7 Price     Stock price                         \n 8 Low52Wk   52-week low price                   \n 9 High52Wk  52-week high price                  \n10 ROE       Return on Equity                    \n# i 26 more rows\n```\n:::\n:::\n",
    "supporting": [
      "06LiveCase01_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}